# Жизненный цикл сервиса
## Цель работы
Познакомиться с жизненным циклом связанного и свободного сервиса в ОС Android, увидеть на практике порядок вызова методов жизненного цикла.  
## Задания для выполнения  
1.	Создайте в приложении сервис, переопределив все основные методы жизненного цикла. Каждый метод должен выводить в консоль свое название при вызове.  
2.	Не забудьте вызов методов суперкласса и объявление сервиса в манифесте приложения.  
<service  
    android:name=".MyService"  
    android:enabled="true"  
    android:exported="true"></service>  
3.	В основной активности создайте две конопки. При нажатии на первую интент, вызывающий созданный сервис (явный интент) рассылается методом startService(), при нажатии второй - методом bindService().  
4.	Запустите приложение и понаблюдайте за жизненным циклом сервиса.  
![image](https://user-images.githubusercontent.com/70998859/154354400-5cf276ea-ccc3-40e4-a41e-cd4dc74598fa.png)  
## Контрольные вопросы  
1.	Когда происходит создание и удаление связанного сервиса?  
Когда мы используем метод onBind(), в момент первой привязки он вызывает также метод onCreate(), который создает сервис. Если сервис не в запущенном состоянии и клиентский компонент отвязывается от сервиса, то он уничтожается и вызывается onDestroy(). Чтобы удалить сервис его нужно отвязать методом onUnbind().  
2.	Какие методы жизненного цикла вызываются у сервиса и в какой последовательности?  
onCreate() – вызывается, когда сервис создается системой. Для создания started сервиса используется метод startService().  
onStartCommand() – вызывается, когда сервис переходит в активное состояние. Код, который выполняет сервис, должен быть написан в этом методе.  
onDestroy() – вызывается, когда сервис уничтожается системой. Это происходит после вызова stopSelf() или stopService().   
Для связанных:  
onCreate() – вызывается когда первый клиент присоединяется к сервису вызовом bindService() с флагом BIND_AUTO_CREATE.  
onBind() – вызывается системой, когда первый клиент присоединяется к сервису вызовом метода bindService(). После вызова этого метода bound сервис переходит в активное состояние.  
onUnbind() – вызывается системой, когда все клиенты отсоединились от сервиса вызовом метода unbindService().  
onDestroy() – вызывается после onUnbind(), перед тем как система уничтожит сервис. Сервис может быть одновременно started и bound. В этом случае вызываются все методы жизненного цикла обоих типов сервисов.  
3.	Как соотносится ЖЦ активности и сервиса?  
И в ЖЦ активности и в ЖЦ сервиса при первом запуске мы создаем методом onCreate(), а уничтожаем методом onDestroy(). После создания в сервисе мы вызываем метод onStartCommand(), что означает что сервис переходит в активное состояние, а в активности вызывается метод onStart(), а далее при взаимодействии с пользователем onResume(), также ее можно поставить на паузу методом onPause(). В отличии от активности, сервисы могут быть связанные и несвязанные, тогда вместо onStartCommand(), вызывается метод onBind(), а впоследствии onUnbind(). Сервис может быть запущен как самостоятельная единица, а впоследствии может быть привязан к некоторым компонентам. В этом случае в сервисе должны быть обязательно реализованы оба метода onStartCommand() и onBind(). Сервисы существуют дольше активностей, до тех пор, пока ее не остановят или же она не остановится сама. Жизненный цикл сервиса намного проще жизненного цикла активности, однако он может быть осложнен тем, что сервис работает в фоновом режиме и пользователь может и не осознавать, что в некоторых случаях он имеет дело с работой сервисов.  



